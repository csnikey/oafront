webpackJsonp([8],{244:function(e,t,a){function r(e){return a(o(e))}function o(e){var t=l[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var l={"./ProlistManage":389,"./ProlistManage.vue":389,"./default":390,"./default.vue":390};r.keys=function(){return Object.keys(l)},r.resolve=o,e.exports=r,r.id=244},389:function(e,t,a){function r(e){a(451)}var o=a(54)(a(413),a(473),r,null,null);e.exports=o.exports},390:function(e,t,a){function r(e){a(459)}var o=a(54)(a(414),a(482),r,"data-v-4d956a62",null);e.exports=o.exports},413:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(100);t.default={name:"ProlistManage",created:function(){this.getData({pagesize:this.per_page,currentpage:this.currentpage}),this.getDepartData(),this.getProstages(),this.getProTerms()},mounted:function(){},data:function(){return{limit:1,tableData3:[],per_page:10,currentpage:1,singSelect:!0,totalitems:1,departs:[],prostages:[],terms:[],schools:[],members:[],treeprops:{label:"department_name",value:"id",children:"children"},selectedOptions:[],form:{overdue:"",creator:"",stage:"",schid:"",term:"",depart:[],selectedDepart:""}}},methods:{loadmembers:function(e){var t=this;if(""!=e){var a={name:e};this.$api.getAssignMembers(a).then(function(e){0==e.error&&(t.members=e.data)})}else this.members=[]},loadschools:function(e){var t=this;if(""!==e){var a={school_name:e};this.$api.getAssignSchools(a).then(function(e){0==e.error&&(t.schools=e.data)})}else this.schools=[]},getProTerms:function(){var e=this;this.$api.getSysTerms().then(function(t){0==t.error?e.terms=t.data:e.$message({type:"warning",message:t.msg})})},getProstages:function(){var e=this;this.$api.getProstages().then(function(t){if(0==t.error){var a=t.data,r=[];for(var o in a){var l={};l.label=a[o],l.value=o,r.push(l)}e.prostages=r}else e.$message({type:"warning",message:t.msg})})},optionchange:function(e){var t=e.length;this.form.depart=e,this.form.selectedDepart=e[t-1]},getDepartData:function(){var e=this;r.a.getDepartList().then(function(t){200==t.status?e.departs=t.data.data:e.$message({message:t.msg,type:"warning"})})},curChange:function(e){this.currentpage=e;var t={pagesize:this.per_page,currentpage:e,school_id:""==this.form.school_id?"":this.form.school_id,dept_id:this.form.selectedDepart,creator:this.form.creator,stage:this.form.stage,term_id:this.form.term,overdue:this.form.overdue?"1":""};this.getData(t)},deleteitem:function(e,t,a){var r=this;this.$confirm("删除后将不可恢复，确认要删除吗？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(a),r.$api.post("/daily/plan/delete",{id:a}).then(function(a){0==a.error?(r.$message({message:"删除成功",type:"success"}),t.splice(e,1),r.tableData3=t):r.$message({message:a.msg,type:"warning"})})})},change:function(e){},check:function(e){},getData:function(e){var t=this;r.a.get("/project/projectinfo/getlist",e).then(function(e){if(0==e.error){var a=e.data.list,r=[];for(var o in a){var l=a[o];l.space_income=l.real_income-l.report_sales;var s=["正常","关闭"];l.status=s[l.status],r.push(l)}t.tableData3=r,t.totalitems=parseInt(e.data.totalitems)}else t.$message({message:e.msg,type:"warning"})})},getdata:function(){var e={type:1,per_page:this.pagesize,currentpage:this.currentpage};this.getApiData(e)},onSubmit:function(){var e={pagesize:this.per_page,currentpage:1,school_id:this.form.schid[0],dept_id:this.form.selectedDepart,creator:this.form.creator[0],stage:this.form.stage,term_id:this.form.term,overdue:this.form.overdue?"1":""};this.getData(e)},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()}}}},414:function(e,t){},429:function(e,t,a){t=e.exports=a(232)(!1),t.push([e.i,".c-common-wrap{padding:10px}",""])},437:function(e,t,a){t=e.exports=a(232)(!1),t.push([e.i,"body[data-v-4d956a62]{position:absolute;width:10px;height:2px;float:left}",""])},451:function(e,t,a){var r=a(429);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(233)("c80d4100",r,!0)},459:function(e,t,a){var r=a(437);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(233)("3baf2ed2",r,!0)},473:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-common-wrap"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"部门"}},[a("el-cascader",{attrs:{placeholder:"选择部门",options:e.departs,props:e.treeprops,"change-on-select":e.singSelect,filterable:"",clearable:"","show-all-levels":!1},on:{change:e.optionchange},model:{value:e.form.depart,callback:function(t){e.form.depart=t},expression:"form.depart"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学校名称"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"",placeholder:"模糊搜索学校名称","remote-method":e.loadschools,"multiple-limit":e.limit},model:{value:e.form.schid,callback:function(t){e.form.schid=t},expression:"form.schid"}},e._l(e.schools,function(e){return a("el-option",{key:e.id,attrs:{label:e.school_name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"营销员"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"",placeholder:"搜索工号/姓名","remote-method":e.loadmembers,"multiple-limit":e.limit},model:{value:e.form.creator,callback:function(t){e.form.creator=t},expression:"form.creator"}},e._l(e.members,function(e){return a("el-option",{key:e.id,attrs:{label:e.staffname,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"项目阶段"}},[a("el-select",{attrs:{placeholder:"选择项目阶段",clearable:""},model:{value:e.form.stage,callback:function(t){e.form.stage=t},expression:"form.stage"}},e._l(e.prostages,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"操作学年"}},[a("el-select",{attrs:{placeholder:"选择学年",clearable:""},model:{value:e.form.term,callback:function(t){e.form.term=t},expression:"form.term"}},e._l(e.terms,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-checkbox-group",{model:{value:e.form.overdue,callback:function(t){e.form.overdue=t},expression:"form.overdue"}},[a("el-checkbox",{attrs:{label:"收款逾期项目",name:"type"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("router-link",{staticStyle:{"margin-left":"40px"},attrs:{to:"adddayplan"}},[a("el-button",{attrs:{type:"primary"}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"项目",width:"180px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stage",label:"项目阶段","show-overflow-tooltip":"",width:"120px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"target_sales",label:"目标金额（元）","show-overflow-tooltip":"",width:"160px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"report_sales",label:"报单销售额（元）","show-overflow-tooltip":"",width:"160px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"send_sales",label:"发货销售额（元）","show-overflow-tooltip":"",width:"160px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"real_income",label:"实收款（元）","show-overflow-tooltip":"",width:"140px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"space_income",label:"差额","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"项目状态","show-overflow-tooltip":"",width:"140px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dept_name",label:"部门","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"营销员","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"term_year",label:"操作学年","show-overflow-tooltip":"",width:"140px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"录入时间","show-overflow-tooltip":"",width:"180px"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120px",prop:"can_edit"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.can_edit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.change(t.row.id)}}},[e._v("修改")]):e._e(),e._v(" "),a("router-link",{attrs:{to:"infoplan/"+t.row.id}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("项目详情")])],1),e._v(" "),1==t.row.can_delete?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteitem(t.$index,e.tableData3,t.row.id)}}},[e._v("用户使用")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.totalitems,"current-page":e.currentpage,"page-size":e.per_page},on:{"current-change":e.curChange}})],1)],1)},staticRenderFns:[]}},482:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("li"),e._v("\ned wdwe ewfw     ")])}]}}});