webpackJsonp([9],{240:function(e,t,s){function l(e){s(462)}var o=s(54)(s(420),s(486),l,null,null);e.exports=o.exports},420:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s(106),o=s.n(l),a=s(104),i=s.n(a);t.default={data:function(){return{lock:!1,id:"0",title:"",status:"1",is_menu:"1",url:"",icon:"",remark:"",sort_order:"",moduleslist:[],controllerslist:[],actionslist:[],menulist:[],selected:{module:"",controller:"",action:"",pid:"0"}}},methods:{initData:function(){var e=this;return i()(o.a.mark(function t(){var s,l,a,i,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=void 0,l=void 0,t.next=3,e.$fetch.get("/system/system/getmoduleslist").catch(function(t){return e.$message.error(t.message)});case 3:if(s=t.sent,e.moduleslist=s.data,"0"==e.id){t.next=9;break}return t.next=8,e.$fetch.get("/system/system/getaccesspoint",{id:e.id});case 8:l=t.sent;case 9:return l&&l.data?(a=l,i=a.data,e.selected.module=i.module,e.title=i.title,e.status=i.status,e.is_menu=i.is_menu,e.url=i.url,e.remark=i.remark,e.icon=i.icon,e.selected.pid=i.pid,e.selected.controller=i.contr,e.selected.action=i.action):e.selected.module=e.moduleslist[0].key,t.next=12,e.$fetch.get("/system/system/getcontrollerbymodule",{module:e.selected.module});case 12:r=t.sent,e.controllerslist=r.data;case 14:case"end":return t.stop()}},t,e)}))()},handleModuleChange:function(){var e=this;this.lock&&(this.selected.controller="",this.selected.pid=""),this.$fetch.get("/system/system/getmenubymodule",{module:this.selected.module}).then(function(t){var s=t.data;s.unshift({id:"0",menu_name:"#作为一级菜单#"}),e.menulist=s,e.lock=!0})},switchActionList:function(){var e=this;this.lock&&(this.selected.action="");var t=this.controllerslist.find(function(t){return t.name==e.selected.controller});t&&(this.actionslist=t.action_list)},submitEdition:function(){var e=this,t={};"1"==this.is_menu?t={id:this.id,is_menu:this.is_menu,title:this.title,module:this.selected.module,status:this.status,pid:this.selected.pid,url:this.url,sort_order:this.sort_order,icon:this.icon,remark:this.remark}:"0"==this.is_menu&&(t={id:this.id,is_menu:this.is_menu,title:this.title,module:this.selected.module,status:this.status,pid:this.selected.pid,contr:this.selected.controller,action:this.selected.action,remark:this.remark}),this.$fetch.post("/system/system/saveaccesspoint",t).then(function(t){e.$notify({type:"success",title:"成功",message:"保存成功, 即将返回权限列表"}),setTimeout(function(){e.$router.push({name:"permission_rules"})},1e3)}).catch(function(t){e.submiting=!1,e.$notify.error({title:"错误",message:t.message})})}},created:function(){var e=this.$route.query.id;this.id=e||"0",this.initData()}}},440:function(e,t,s){t=e.exports=s(232)(!1),t.push([e.i,".formrow>div{height:44px;line-height:44px}",""])},462:function(e,t,s){var l=s(440);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);s(233)("32e0a390",l,!0)},486:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"gaptop-md"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$router.push({name:"permission_rules"})}}},[s("i",{staticClass:"el-icon-arrow-left"}),e._v(" 返回权限列表\n\t\t")])],1),e._v(" "),s("div",{staticClass:"gaptop-lg",staticStyle:{padding:"10px 10%"}},[s("el-row",{staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("权限名：")]),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-input",{attrs:{placeholder:"输入权限名"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1)],1),e._v(" "),s("el-row",{staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("作为菜单：")]),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-radio",{attrs:{label:"1"},model:{value:e.is_menu,callback:function(t){e.is_menu=t},expression:"is_menu"}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:"0"},model:{value:e.is_menu,callback:function(t){e.is_menu=t},expression:"is_menu"}},[e._v("否")])],1)],1),e._v(" "),s("el-row",{staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("权限：")]),e._v(" "),s("el-col",{staticStyle:{height:"100%"},attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-select",{attrs:{placeholder:"选择模块"},on:{change:e.handleModuleChange},model:{value:e.selected.module,callback:function(t){e.selected.module=t},expression:"selected.module"}},e._l(e.moduleslist,function(e){return s("el-option",{key:e.key,attrs:{label:e.key,value:e.key}})})),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:"1"!==e.is_menu,expression:"is_menu !== '1'"}],attrs:{placeholder:"选择controller"},on:{change:e.switchActionList},model:{value:e.selected.controller,callback:function(t){e.selected.controller=t},expression:"selected.controller"}},e._l(e.controllerslist,function(e){return s("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:"1"!==e.is_menu,expression:"is_menu !== '1'"}],attrs:{placeholder:"选择action"},model:{value:e.selected.action,callback:function(t){e.selected.action=t},expression:"selected.action"}},e._l(e.actionslist,function(e){return s("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:"1"===e.is_menu,expression:"is_menu === '1'"}],staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("路由地址：")]),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-input",{attrs:{placeholder:"输入路由地址"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)],1),e._v(" "),s("el-row",{staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("父级菜单：")]),e._v(" "),s("el-col",{staticStyle:{height:"100%"},attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-select",{attrs:{placeholder:"选择父级"},model:{value:e.selected.pid,callback:function(t){e.selected.pid=t},expression:"selected.pid"}},e._l(e.menulist,function(e){return s("el-option",{key:e.id,attrs:{label:e.menu_name,value:e.id}})}))],1)],1),e._v(" "),s("el-row",{staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("是否启用：")]),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-radio",{attrs:{label:"1"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[e._v("启用")]),e._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[e._v("禁用")])],1)],1),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:"1"===e.is_menu,expression:"is_menu === '1'"}],staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("图标：")]),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-input",{attrs:{placeholder:"输入icon"},model:{value:e.icon,callback:function(t){e.icon=t},expression:"icon"}})],1)],1),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:"1"===e.is_menu,expression:"is_menu === '1'"}],staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("菜单排序：")]),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-input",{attrs:{placeholder:"输入整数，越大越靠前"},model:{value:e.sort_order,callback:function(t){e.sort_order=t},expression:"sort_order"}})],1)],1),e._v(" "),s("el-row",{staticClass:"formrow gaptop-md",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}},[e._v("备注：")]),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-input",{attrs:{placeholder:"输入备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1),e._v(" "),s("el-row",{staticClass:"formrow gaptop-lg",attrs:{gutter:20}},[s("el-col",{attrs:{xs:24,sm:6,md:3,lg:3}}),e._v(" "),s("el-col",{attrs:{xs:24,sm:18,md:9,lg:9}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEdition()}}},[e._v("确认提交")])],1)],1)],1)])},staticRenderFns:[]}}});